!function(){"use strict";function e(e,t){function a(a){function n(){u=a,s=u.triggerEl,p.triggerElementScope=angular.element(s).scope(),c=u.scope||p.triggerElementScope,c.popupCtrl=p}function l(){t[0].body.removeEventListener("mousedown",o),d&&(d.removeEventListener("mousedown",i),d.parentElement.removeChild(d),d=null),g=!1}function r(){if(!g){var a=angular.element('<div datetime-picker-popup ng-cloak popup-ctrl="popupCtrl"></div>');u.dateFormat&&a.attr("date-format",u.dateFormat),u.ngModel&&a.attr("ng-model",u.ngModel),u.year&&a.attr("year",parseInt(u.year)),u.month&&a.attr("month",parseInt(u.month)),u.day&&a.attr("day",parseInt(u.day)),u.hour&&a.attr("hour",parseInt(u.hour)),u.minute&&a.attr("minute",parseInt(u.minute)),""!==u.dateOnly&&u.dateOnly!==!0||a.attr("date-only","true"),"false"===u.closeOnSelect&&a.attr("close-on-select","false"),d=e(a)(c)[0],d.triggerEl=s,t[0].body.appendChild(d);var n=s.getBoundingClientRect();c.$apply();var l=d.getBoundingClientRect();d.style.position="absolute",n.width>l.width?d.style.left=n.left+n.width-l.width+window.pageXOffset+"px":d.style.left=n.left+window.pageXOffset+"px",n.top<300||window.innerHeight-n.bottom>300?d.style.top=n.bottom+window.pageYOffset+"px":d.style.top=n.top-l.height+window.pageYOffset+"px",t[0].body.addEventListener("mousedown",o),d.addEventListener("mousedown",i),g=!0}}function o(e){if(d){var t=e&&e.target;t.hasAttribute("datetime-picker")||l(d)}}function i(e){e.preventDefault(),e.stopImmediatePropagation()}var d,s,c,u,p=this,g=!1;p.triggerElementScope=null,p.open=r,p.close=l,n()}return a}function t(e,t){function a(e,a,o){function i(t){e.mv=r(e.mv.year,e.mv.month+t)}function c(){e.selectedDate=null;var t=e.popupCtrl.triggerElementScope;t.$eval(o.ngModel+"= date",{date:null}),e.$emit("datetime-picker-changed",null)}function u(t){var a=angular.element(t.target)[0];a.className.indexOf("selectable")!==-1&&(e.updateNgModel(parseInt(a.innerHTML)),e.closeOnSelect!==!1&&e.popupCtrl.close())}function p(a){if(a=a?a:e.selectedDate.getDate(),e.selectedDate=new Date(e.mv.year,e.mv.month,a,e.inputHour,e.inputMinute,0),e.selectedDay=e.selectedDate.getDate(),o.ngModel){var n,l=e.popupCtrl.triggerElementScope;n=l.$eval(o.ngModel)&&"Date"===l.$eval(o.ngModel).constructor.name?new Date(t(e.selectedDate,e.dateFormat)):t(e.selectedDate,e.dateFormat),l.$eval(o.ngModel+"= date",{date:n}),e.$emit("datetime-picker-changed",n)}}n();var g=o.dateFormat||"short";e.dateFormat=g,e.months=d,e.daysOfWeek=s,e.inputHour=null,e.inputMinute=null,e.dateOnly===!0&&(a[0].querySelector("#adp-time").style.display="none"),e.$applyAsync(function(){if(o.ngModel){var a=""+(e.popupCtrl.triggerElementScope.$eval(o.ngModel)||"");a&&(e.selectedDate=l(a,g))}if(!e.selectedDate||isNaN(e.selectedDate.getTime())){var n=new Date,i=e.year||n.getFullYear(),d=e.month?e.month-1:n.getMonth(),s=e.day||n.getDate(),c=e.hour||n.getHours(),u=e.minute||n.getMinutes();e.selectedDate=new Date(i,d,s,c,u,0)}e.inputHour=e.selectedDate.getHours(),e.inputMinute=e.selectedDate.getMinutes(),e.mv=r(e.selectedDate.getFullYear(),e.selectedDate.getMonth()),e.today=t(new Date,"yyyy-M-d"),e.mv.year==e.selectedDate.getFullYear()&&e.mv.month==e.selectedDate.getMonth()?e.selectedDay=e.selectedDate.getDate():e.selectedDay=null}),e.addMonth=i,e.clearDate=c,e.setDate=u,e.updateNgModel=p,e.$on("$destroy",e.popupCtrl.close)}function n(){i=[],d=[],s=[],c=0;for(var t=1;t<=31;t++)i.push(t);for(var t=0;t<12;t++)d.push({fullName:e.DATETIME_FORMATS.MONTH[t],shortName:e.DATETIME_FORMATS.SHORTMONTH[t]});for(var t=0;t<7;t++){var a=e.DATETIME_FORMATS.DAY[(t+c)%7];s.push({fullName:a,firstLetter:a.substr(0,1)})}c=0}function r(e,t){t>11?e++:t<0&&e--,t=(t+12)%12;var a=new Date(e,t,1),n=new Date(e,t+1,0),l=new Date(e,t,0),r=n.getDate(),o=l.getDate(),d=a.getDay(),s=(d-c+7)%7||7,u=i.slice(0,42-(s+r));return u.length>7&&(u=u.slice(0,u.length-7)),{year:e,month:t,days:i.slice(0,r),leadingDays:i.slice(-s-(31-o),o),trailingDays:u}}var i,d,s,c;return{restrict:"A",template:o,replace:!0,scope:{year:"=",month:"=",day:"=",hour:"=",minute:"=",dateOnly:"=",closeOnSelect:"=",popupCtrl:"="},link:a}}function a(e,t,a){return{require:"ngModel",link:function(e,n,l,r){var o=new t({triggerEl:n[0],dateFormat:l.dateFormat,ngModel:l.ngModel,year:l.year,month:l.month,day:l.day,hour:l.hour,minute:l.minute,dateOnly:l.dateOnly,futureOnly:l.futureOnly,closeOnSelect:l.closeOnSelect});e.$watch(l.ngModel,function(e){if(e&&""!=e){var t=new Date(e);r.$setValidity("date",!!t);var a=new Date;l.hasOwnProperty("futureOnly")&&r.$setValidity("future-only",!(t<a))}}),n[0].addEventListener("click",function(){o.open()}),n[0].addEventListener("blur",function(){a(function(){o.close()},0)})}}}function n(e){"string"==typeof e&&(e=new Date(e));var t=new Date(e.getFullYear(),0,1),a=new Date(e.getFullYear(),6,1),n=Math.max(t.getTimezoneOffset(),a.getTimezoneOffset()),l=e.getTimezoneOffset()<n,o=l?n-60:n,i=o>=0?"-":"+";return i+r(Math.abs(o)/60,2)+":"+r(Math.abs(o%60),2)}function l(e,t){var a="";t=t.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&");for(var l=t,o=[{key:"day",spec:"d",s:0,e:0},{key:"month",spec:"M",s:0,e:0},{key:"year",spec:"y",s:0,e:0}],i=0;i<o.length;i++){var d=new RegExp("["+o[i].spec+"]+"),s=d.exec(t);o[i].s=s.index,o[i].e=s.index+s[0].length}o=o.sort(function(e,t){return t.s-e.s});for(var i=0;i<o.length;i++)l=l.slice(0,o[i].s)+"([0-9]+)"+l.slice(o[i].e);l=new RegExp(l);var c=l.exec(e);o.reverse();for(var u={day:0,month:0,year:0},i=0;i<o.length;i++)u[o[i].key]=+c[i+1];a=r(u.year,4)+"-"+r(u.month,2)+"-"+r(u.day,2),a.match(/[0-9]{2}:/)||(a+=" 00:00:00"),a=a.replace(/([0-9]{2}-[0-9]{2})-([0-9]{4})/,"$2-$1"),a=a.replace(/([\/-][0-9]{2,4})\ ([0-9]{2}\:[0-9]{2}\:)/,"$1T$2"),a=a.replace(/EDT|EST|CDT|CST|MDT|PDT|PST|UT|GMT/g,""),a=a.replace(/\s*\(\)\s*/,""),a=a.replace(/[\-\+][0-9]{2}:?[0-9]{2}$/,""),a+=n(a);var p=new Date(a);return new Date(p.getFullYear(),p.getMonth(),p.getDate(),p.getHours(),p.getMinutes(),p.getSeconds())}function r(e,t){return("0000"+e).slice(-t)}var o=['<div class="angularjs-datetime-picker">','  <div class="adp-month">','    <button type="button" class="adp-prev" ng-click="addMonth(-1)">&laquo;</button>','    <span title="{{months[mv.month].fullName}}">{{months[mv.month].shortName}}</span> {{mv.year}}','    <button type="button" class="adp-next" ng-click="addMonth(1)">&raquo;</button>',"  </div>",'  <div class="adp-days" ng-click="setDate($event)">','    <div class="adp-day-of-week" ng-repeat="dayOfWeek in ::daysOfWeek" title="{{dayOfWeek.fullName}}">{{::dayOfWeek.firstLetter}}</div>','    <div class="adp-day" ng-show="mv.leadingDays.length < 7" ng-repeat="day in mv.leadingDays">{{::day}}</div>','    <div class="adp-day selectable" ng-repeat="day in mv.days" ',"      today=\"{{today}}\" d2=\"{{mv.year + '-' + (mv.month + 1) + '-' + day}}\"",'      ng-class="{',"        selected: (day == selectedDay),","        today: (today == (mv.year + '-' + (mv.month + 1) + '-' + day)),","        weekend: (mv.leadingDays.length + day)%7 == 1 || (mv.leadingDays.length + day)%7 == 0",'      }">',"      {{::day}}","    </div>",'    <div class="adp-day" ng-show="mv.trailingDays.length < 7" ng-repeat="day in mv.trailingDays">{{::day}}</div>',"  </div>",'  <div class="adp-days" id="adp-time"> ','    <label class="timeLabel">Time:</label> <span class="timeValue">{{("0"+inputHour).slice(-2)}} : {{("0"+inputMinute).slice(-2)}}</span><br/>','    <label class="hourLabel">Hour:</label> <input class="hourInput" type="range" min="0" max="23" ng-model="inputHour" ng-change="updateNgModel()" />','    <label class="minutesLabel">Min:</label> <input class="minutesInput" type="range" min="0" max="59" ng-model="inputMinute"  ng-change="updateNgModel()"/> ',"  </div> ",'  <div class="adp-days" id="clear-date"> ','    <label class="clear-date-label" ng-click="clearDate()">Clear</label>',"  </div> ","</div>"].join("\n");angular.module("angularjs-datetime-picker",[]).factory("DatetimePicker",e).directive("datetimePickerPopup",t).directive("datetimePicker",a),e.$inject=["$compile","$document"],t.$inject=["$locale","dateFilter"],a.$inject=["$parse","DatetimePicker","$timeout"]}();