!function(){"use strict";angular.module("angularjs-datetime-picker",[]);var e=function(e){"string"==typeof e&&(e=new Date(e));var t=new Date(e.getFullYear(),0,1),a=new Date(e.getFullYear(),6,1),l=Math.max(t.getTimezoneOffset(),a.getTimezoneOffset()),n=e.getTimezoneOffset()<l,i=n?l-60:l,r=i>=0?"-":"+";return r+("0"+i/60).slice(-2)+":"+("0"+i%60).slice(-2)},t=function(e,t,a){var l=a("DatetimePickerCtrl");return{open:function(e){l.openDatetimePicker(e)},close:function(){l.closeDatetimePicker()}}};t.$inject=["$compile","$document","$controller"],angular.module("angularjs-datetime-picker").factory("DatetimePicker",t);var a=function(e,t){var a,l=this,n=function(e){e&&e.remove(),t[0].body.removeEventListener("click",l.closeDatetimePicker)};this.openDatetimePicker=function(l){this.closeDatetimePicker();var n=angular.element("<div datetime-picker-popup ng-cloak></div>");l.dateFormat&&n.attr("date-format",l.dateFormat),l.ngModel&&n.attr("ng-model",l.ngModel),l.year&&n.attr("year",parseInt(l.year)),l.month&&n.attr("month",parseInt(l.month)),l.day&&n.attr("day",parseInt(l.day)),l.hour&&n.attr("hour",parseInt(l.hour)),l.minute&&n.attr("minute",parseInt(l.minute)),l.allowClose&&n.attr("allow-close",l.allowClose),l.displaySelectedDate&&n.attr("display-selected-date",l.displaySelectedDate),""!==l.dateOnly&&l.dateOnly!==!0||n.attr("date-only","true"),"false"===l.closeOnSelect&&n.attr("close-on-select","false");var i=l.triggerEl;l.scope=l.scope||angular.element(i).scope(),a=e(n)(l.scope)[0],a.triggerEl=l.triggerEl,t[0].body.appendChild(a);var r=i.getBoundingClientRect();l.scope.$apply();var o=a.getBoundingClientRect();a.style.position="absolute",r.width>o.width?a.style.left=r.left+r.width-o.width+window.scrollX+"px":a.style.left=r.left+window.scrollX+"px",r.top<300||window.innerHeight-r.bottom>300?a.style.top=r.bottom+window.scrollY+"px":a.style.top=r.top-o.height+window.scrollY+"px",t[0].body.addEventListener("click",this.closeDatetimePicker)},this.closeDatetimePicker=function(e){var a=e&&e.target,l=t[0].querySelector("div[datetime-picker-popup]");e&&a?a.hasAttribute("datetime-picker")||l&&l.contains(a)||n(l):n(l)}};a.$inject=["$compile","$document"],angular.module("angularjs-datetime-picker").controller("DatetimePickerCtrl",a);var l=['<div class="angularjs-datetime-picker">','  <div class="adp-month adp-top" id="adp-top" style="display: none;">','    <span class="adp-prev" ></span>',"    <div>",'       <label class="timeLabel">Date:</label> {{ selectedDate | date: "mediumDate" }}<br />','       <a type="button" class="adp-link" ng-click="changeCurrentDate()">Change to today</a>',"    </div>",'    <button type="button" class="adp-next adp-close" ng-click="closeDatetimePicker()">x</button>',"  </div>",'  <div class="adp-month">','    <button type="button" class="adp-prev" ng-click="addMonth(-1)">&laquo;</button>','    <span title="{{months[mv.month].fullName}}">{{months[mv.month].shortName}}</span> {{mv.year}}','    <button type="button" class="adp-next" ng-click="addMonth(1)">&raquo;</button>',"  </div>",'  <div class="adp-days" ng-click="setDate($event)">','    <div class="adp-day-of-week" ng-repeat="dayOfWeek in ::daysOfWeek" title="{{dayOfWeek.fullName}}">{{::dayOfWeek.firstLetter}}</div>','    <div class="adp-day" ng-show="mv.leadingDays.length < 7" ng-repeat="day in mv.leadingDays">{{::day}}</div>','    <div class="adp-day selectable" ng-repeat="day in mv.days" ',"      today=\"{{today}}\" d2=\"{{mv.year + '-' + (mv.month + 1) + '-' + day}}\"",'      ng-class="{',"        selected: (day == selectedDay),","        today: (today == (mv.year + '-' + (mv.month + 1) + '-' + day)),","        weekend: (mv.leadingDays.length + day)%7 == 1 || (mv.leadingDays.length + day)%7 == 0",'      }">',"      {{::day}}","    </div>",'    <div class="adp-day" ng-show="mv.trailingDays.length < 7" ng-repeat="day in mv.trailingDays">{{::day}}</div>',"  </div>",'  <div class="adp-days" id="adp-time"> ','    <div class="adp-time"><label class="timeLabel">Time:</label> <span class="timeValue">{{("0"+inputHour).slice(-2)}} : {{("0"+inputMinute).slice(-2)}}</span></div><br/>','    <label class="hourLabel">Hour:</label> <input class="hourInput" type="range" min="0" max="23" ng-model="inputHour" ng-change="updateNgModel(selectedDay)" />','    <label class="minutesLabel">Min:</label> <input class="minutesInput" type="range" min="0" max="59" ng-model="inputMinute"  ng-change="updateNgModel(selectedDay)"/> ',"  </div> ","</div>"].join("\n"),n=function(t,a){var n,i,r,o,d=function(){n=[],i=[],r=[],o=0;for(var e=1;e<=31;e++)n.push(e);for(var e=0;e<12;e++)i.push({fullName:t.DATETIME_FORMATS.MONTH[e],shortName:t.DATETIME_FORMATS.SHORTMONTH[e]});for(var e=0;e<7;e++){var a=t.DATETIME_FORMATS.DAY[(e+o)%7];r.push({fullName:a,firstLetter:a.substr(0,1)})}o=0},s=function(e,t){t>11?e++:t<0&&e--,t=(t+12)%12;var a=new Date(e,t,1),l=new Date(e,t+1,0),i=new Date(e,t,0),r=l.getDate(),d=i.getDate(),s=a.getDay(),c=(s-o+7)%7||7,u=n.slice(0,42-(c+r));return u.length>7&&(u=u.slice(0,u.length-7)),{year:e,month:t,days:n.slice(0,r),leadingDays:n.slice(-c-(31-d),d),trailingDays:u}},c=function(t,l,n,o){d();var c=n.dateFormat||"short";t.months=i,t.daysOfWeek=r,t.inputHour,t.inputMinute,t.dateOnly===!0&&(l[0].querySelector("#adp-time").style.display="none"),t.allowClose===!0&&l[0].querySelector("#adp-top")&&(l[0].querySelector("#adp-top").style.display="block"),t.$applyAsync(function(){if(o.triggerEl=angular.element(l[0].triggerEl),n.ngModel){var i=""+o.triggerEl.scope().$eval(n.ngModel);if(i){t.displaySelectedDate||(i.match(/[0-9]{2}:/)||(i+=" 00:00:00"),i=i.replace(/([0-9]{2}-[0-9]{2})-([0-9]{4})/,"$2-$1"),i=i.replace(/([\/-][0-9]{2,4})\ ([0-9]{2}\:[0-9]{2}\:)/,"$1T$2"),i=i.replace(/EDT|EST|CDT|CST|MDT|PDT|PST|UT|GMT/g,""),i=i.replace(/\s*\(\)\s*/,""),i=i.replace(/[\-\+][0-9]{2}:?[0-9]{2}$/,""),i+=e(i));var r=new Date(i);t.selectedDate=new Date(r.getFullYear(),r.getMonth(),r.getDate(),r.getHours(),r.getMinutes(),r.getSeconds())}}if(!t.selectedDate||isNaN(t.selectedDate.getTime())){var d=new Date,u=t.year||d.getFullYear(),m=t.month?t.month-1:d.getMonth(),p=t.day||d.getDate(),g=t.hour||0===t.hour?t.hour:d.getHours(),y=t.minute||0===t.minute?t.minute:d.getMinutes();t.selectedDate=new Date(u,m,p,g,y,0)}t.inputHour=t.selectedDate.getHours(),t.inputMinute=t.selectedDate.getMinutes();var D=o.triggerEl.scope(),v=a(D.$eval(n.ngModel),c);t.selectedDate=v?new Date(v):t.selectedDate,t.mv=s(t.selectedDate.getFullYear(),t.selectedDate.getMonth()),t.today=a(new Date,"yyyy-M-d"),t.mv.year==t.selectedDate.getFullYear()&&t.mv.month==t.selectedDate.getMonth()?t.selectedDay=t.selectedDate.getDate():t.selectedDay=null}),t.changeCurrentDate=function(){t.selectedDate=new Date,t.mv=s(t.selectedDate.getFullYear(),t.selectedDate.getMonth()),t.today=a(new Date,"yyyy-M-d"),t.mv.year==t.selectedDate.getFullYear()&&t.mv.month==t.selectedDate.getMonth()?t.selectedDay=t.selectedDate.getDate():t.selectedDay=null},t.addMonth=function(e){t.mv=s(t.mv.year,t.mv.month+e)},t.closeDatetimePicker=function(){o.closeDatetimePicker()},t.setDate=function(e){var a=angular.element(e.target)[0];a.className.indexOf("selectable")!==-1&&(t.updateNgModel(parseInt(a.innerHTML)),t.closeOnSelect!==!1&&o.closeDatetimePicker())},t.updateNgModel=function(e){if(e=e?e:t.selectedDate.getDate(),t.selectedDate=new Date(t.mv.year,t.mv.month,e,t.inputHour,t.inputMinute,0),t.selectedDay=t.selectedDate.getDate(),n.ngModel){var l,i=o.triggerEl.scope();l=i.$eval(n.ngModel)&&"Date"===i.$eval(n.ngModel).constructor.name?new Date(a(t.selectedDate,c)):a(t.selectedDate,c),i.$eval(n.ngModel+"= date",{date:l})}},t.$on("$destroy",o.closeDatetimePicker)};return{restrict:"A",template:l,controller:"DatetimePickerCtrl",replace:!0,scope:{year:"=",month:"=",day:"=",hour:"=",minute:"=",dateOnly:"=",closeOnSelect:"=",allowClose:"=",displaySelectedDate:"="},link:c}};n.$inject=["$locale","dateFilter"],angular.module("angularjs-datetime-picker").directive("datetimePickerPopup",n);var i=function(e,t){return{require:"ngModel",link:function(e,a,l,n){e.$watch(l.ngModel,function(e){if(e&&""!=e){var t=new Date(e);n.$setValidity("date",!!t);var a=new Date;l.hasOwnProperty("futureOnly")&&n.$setValidity("future-only",!(t<a))}}),a[0].addEventListener("click",function(){t.open({triggerEl:a[0],dateFormat:l.dateFormat,ngModel:l.ngModel,year:l.year,month:l.month,day:l.day,hour:l.hour,minute:l.minute,dateOnly:l.dateOnly,futureOnly:l.futureOnly,closeOnSelect:l.closeOnSelect,displaySelectedDate:l.displaySelectedDate,allowClose:l.allowClose})})}}};i.$inject=["$parse","DatetimePicker"],angular.module("angularjs-datetime-picker").directive("datetimePicker",i)}();